<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>UhCut - Video Editor</title>
    <link rel="stylesheet" href="style.css">

    <!-- PWA / iOS Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://placehold.co/180x180/252535/00d2ff?text=UhCut">
    <meta name="theme-color" content="#252535">
</head>
<body>
    <div class="app-container">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="logo">UhCut</div>
            <div class="actions">
                <button id="export-btn">Export</button>
            </div>
        </header>

        <!-- Main Workspace -->
        <div class="workspace">
            <input type="file" id="file-upload" multiple accept="video/*,audio/*" style="display:none">

            <!-- Preview Player -->
            <div class="preview-area">
                <div class="video-container">
                    <video id="main-video" playsinline></video>
                    <canvas id="overlay-canvas"></canvas> <!-- For drawing or overlays -->
                </div>
                <div class="playback-controls">
                    <button id="play-pause-btn" class="tool-btn" style="width:48px; height:48px;">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <span id="time-display">00:00 / 00:00</span>
                </div>
            </div>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <button id="tool-add-media" class="tool-btn" title="Add Media">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                <span>Add</span>
            </button>
            <div class="separator"></div>
            <button id="tool-undo" class="tool-btn" title="Undo">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>
                <span>Undo</span>
            </button>
            <button id="tool-redo" class="tool-btn" title="Redo">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>
                <span>Redo</span>
            </button>
            <div class="separator"></div>
            <button id="tool-split" class="tool-btn" title="Split">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M17 15h2v2h-2zm0-4h2v2h-2zm0-4h2v2h-2zm-3.26 0l-1.26 1.26c.71 1.45.69 3.18-.18 4.74l1.26 1.26c1.23-2.06 1.23-4.5.18-7.26zm-3.48 4l-1.26 1.26c.71 1.45.69 3.18-.18 4.74l1.26 1.26c1.23-2.06 1.23-4.5.18-7.26zM7 15h2v2H7zm0-4h2v2H7zm0-4h2v2H7z"/></svg>
                <span>Split</span>
            </button>
            <button id="tool-delete" class="tool-btn" title="Delete">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                <span>Delete</span>
            </button>
            <div class="separator"></div>
            <button id="tool-zoom-in" class="tool-btn" title="Zoom In">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>
                <span>In</span>
            </button>
            <button id="tool-zoom-out" class="tool-btn" title="Zoom Out">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/></svg>
                <span>Out</span>
            </button>
            <div class="separator"></div>
            <button id="tool-extract-audio" class="tool-btn" title="Extract Audio">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>
                <span>Audio</span>
            </button>
            <button id="tool-record" class="tool-btn" title="Record">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>
                <span>Mic</span>
            </button>
            <button id="tool-silence" class="tool-btn" title="Remove Silence">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" opacity="0.3"/><path d="M15 11h2v2h-2zm4 0h2v2h-2zM7 11h2v2H7zm-4 0h2v2H3z" /></svg>
                <span>Silence</span>
            </button>
            <button id="tool-stabilize" class="tool-btn" title="Stabilize" style="display:none">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M22 6V4H2v2h20zm0 14v-2H2v2h20zM2.5 9.5h19v5h-19v-5zm2 2v1h15v-1h-15z"/></svg>
                <span>Stabilize</span>
            </button>
        </div>

        <!-- Timeline -->
        <div class="timeline-container">
            <div class="timeline-header">
                <div class="time-ruler" id="time-ruler"></div>
            </div>
            <div class="timeline-tracks" id="timeline-tracks">
                <!-- Tracks will be injected here -->
            </div>
            <div class="playhead" id="playhead"></div>
        </div>

        <!-- Recording Modal/Overlay -->
        <div id="record-overlay" class="modal hidden">
            <div class="modal-content">
                <h3>Recording</h3>
                <canvas id="waveform-canvas" width="300" height="100"></canvas>
                <div class="modal-actions">
                    <button id="stop-record-btn">Stop & Add</button>
                    <button id="cancel-record-btn">Cancel</button>
                </div>
            </div>
        </div>

        <div id="export-overlay" class="modal hidden">
            <div class="modal-content">
                <h3>Exporting...</h3>
                <div style="margin: 20px 0; font-size: 1.2em;" id="export-progress-text">0%</div>
                <div class="modal-actions">
                    <button id="save-export-btn" style="display:none; background:#00d2ff;">Save Video</button>
                    <button id="cancel-export-btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
